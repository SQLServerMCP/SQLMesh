# --- Gateway Connection ---
gateways:
  databricks-dev:
    connection:
      # For more information on configuring the connection to your execution engine, visit:
      # https://sqlmesh.readthedocs.io/en/stable/reference/configuration/#connection
      # https://sqlmesh.readthedocs.io/en/stable/integrations/engines/databricks/#connection-options
      type: databricks
      server_hostname: dbc-ddc5f67b-9667.cloud.databricks.com
      http_path: "{ env_var('DATABRICKS_HTTP_PATH') }"
      access_token: "{ env_var('DATABRICKS_PERSONAL_ACCESS_TOKEN') }" 
      catalog: newbankingdemo
      
default_gateway: databricks-dev

# --- Model Defaults ---
# https://sqlmesh.readthedocs.io/en/stable/reference/model_configuration/#model-defaults

model_defaults:
  dialect: databricks
  start: 2025-12-01 # Start date for backfill history
  cron: '@daily'    # Run models daily at 12am UTC (can override per model)

# --- Linting Rules ---
# Enforce standards for your team
# https://sqlmesh.readthedocs.io/en/stable/guides/linter/

linter:
  enabled: true
  rules:
    - ambiguousorinvalidcolumn
    - invalidselectstarexpansion
    - noambiguousprojections
